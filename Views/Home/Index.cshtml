@model List<CatForum.Models.Discussion>


@{
    ViewData["Title"] = "Home Page";
    var discussionComments = ViewBag.DiscussionComments;
}

<h1 class="fw-bold">CatForum</h1>
<button onclick="window.location.href='@Url.Action("Create", "Discussions")'" class="mb-1">Create new discussion</button>

<div class="masonry-grid">
    @foreach (var item in Model){
        string imageUrl = Url.Content("/photos/" + item.ImageFilename);

        <div class="masonry-grid-item mb-4 mt-3 discussionCard d-flex">
            <div class="w-75">
                <a href="@Url.Action("GetDiscussion", "Home", new {id = item.DiscussionId})" class="text-decoration-none">
                    <h3>@item.Title</h3>
                </a>
                <div class="d-flex">
                    <div class="me-3"># of comments: @discussionComments[item.DiscussionId]</div>
                    <div>Created at: @item.CreateDate</div>
                </div>
            </div>
            <div class="ms-auto">
                    <img src="@imageUrl" class="img-fluid" height="75" width="105" alt="thumbnail for discussion with id @item.DiscussionId" />                
            </div>
           
            
        </div>
    }
</div>
